/*!
* Dynamic Step Process Panels
* http://codecanyon.net/item/dynamic-step-process-panels-for-wordpress/125748?ref=quanticalabs
*
* Copyright 2010, QuanticaLabs
* You need to buy a license if you want use this script.
* http://codecanyon.net/item/dynamic-step-process-panels-for-wordpress/125748?ref=quanticalabs
* http://codecanyon.net/wiki/buying/howto-buying/licensing/
*/
(function(e){function t(i){var s=i.data.options;i.preventDefault();var o=null;if(e(this).attr("href")!=undefined&&e(this).attr("href").substr(0,1)!="#"&&e(this).attr("href")!="")o=e("#"+e(this).attr("href").split("#")[1]);else o=e(e(this).attr("href"));var u=e("#"+i.data.panelId).children("[href]").index(e(this));if(false===s.onOpen(i,e(this),o,u+1)){e(this).trigger("mouseout");return}e(this).unbind("mouseout",r);if(e(this).attr("href")!=undefined&&e(this).attr("href").substr(0,1)!="#"&&e(this).attr("href")!=""){var a=e(this).attr("href").split("#")[0];var f=e(this).attr("href").split("#")[1];e(i.data.contentsSelector+":not(#"+f+")").css("display","none");var l=e(this);e.ajax({url:a,type:"post",async:false,dataType:"html",success:function(t){e("#"+f).css({opacity:0,display:"block"}).html(t).animate({opacity:1},s.fadeSpeed,function(){if(jQuery.browser.msie)this.style.removeAttribute("filter")})}})}else{e(i.data.contentsSelector+":not("+e(this).attr("href")+")").css("display","none");e(e(this).attr("href")).css({opacity:0,display:"block"}).animate({opacity:1},s.fadeSpeed,function(){if(jQuery.browser.msie)this.style.removeAttribute("filter")})}if(!s.chooseAgain){e(this).unbind(s.event,t);e(this).bind(s.event,function(e){e.preventDefault()})}if(i.data.options.kind=="stepByStep"){if(e(this).next().attr("href")!=undefined&&e._data(e(this).next().get(0),"events")==null){e(this).next().bind(s.event,{options:s,hoverColor:i.data.hoverColor,stepColor:i.data.stepColor,panelId:i.data.panelId,contentsSelector:i.data.contentsSelector},t);e(this).next().bind("mouseover",{options:s,hoverColor:i.data.hoverColor,panelId:i.data.panelId},n);e(this).next().bind("mouseout",{options:s,stepColor:i.data.stepColor,panelId:i.data.panelId},r)}}if(s.nextPrevButtons){var c=null;var h=null;if(e(this).next().length&&e(this).next().attr("href")!=undefined)h=e(this).next().attr("href");if(e(this).prev().attr("href")!=undefined&&(s.chooseAgain||s.kind=="freeChoice"))c=e(this).prev().attr("href");if(e(this).next().length&&(e._data(e(this).next().get(0),"events")==null||e._data(e(this).next().get(0),"events")[s.event]==null))h=null;if(e._data(e(this).prev().get(0),"events")==null||e._data(e(this).prev().get(0),"events")[s.event]==null)c=null;e("#"+i.data.panelId+" .dspp_nextPrevButtons").remove();if(s.nextPrevButtonsPosition=="top")e("#"+i.data.panelId).prepend("<div class='dspp_nextPrevButtons dspp_clearfix'><a class='dspp_button "+(c!=null?"dspp_activeButton-"+s.style:"dspp_inactiveButton")+"' title='"+s.prevButtonTitle+"' "+(c!=null?"xref='"+c+"'":"xref='#'")+">"+s.prevButtonTitle+"</a><a class='dspp_button "+(h!=null?"dspp_activeButton-"+s.style:"dspp_inactiveButton")+"' title='"+s.nextButtonTitle+"' "+(h!=null?"xref='"+h+"'":"xref='#'")+">"+s.nextButtonTitle+"</a></div>");else e("#"+i.data.panelId).append("<div class='dspp_nextPrevButtons dspp_clearfix'><a class='dspp_button "+(c!=null?"dspp_activeButton-"+s.style:"dspp_inactiveButton")+"' title='"+s.prevButtonTitle+"' "+(c!=null?"xref='"+c+"'":"xref='#'")+">"+s.prevButtonTitle+"</a><a class='dspp_button "+(h!=null?"dspp_activeButton-"+s.style:"dspp_inactiveButton")+"' title='"+s.nextButtonTitle+"' "+(h!=null?"xref='"+h+"'":"xref='#'")+">"+s.nextButtonTitle+"</a></div>")}if(!s.markVisited){if(i.data.options.kind=="stepByStep"){e(this).nextAll("a.dspp_step").each(function(t){e(this).css({"background-position":-551+parseInt(e(this).css("width"))-(e(this).is(e("#"+i.data.panelId+" .dspp_step:last"))?580:10)+parseInt(e(this).css("padding-left"))+"px "+e(this).backgroundPosition().split(" ")[1],color:i.data.stepColor});if(t>0){e(this).unbind(s.event);e(this).unbind("mouseover",n)}e(this).unbind("mouseout",r)});e(this).prevAll("a.dspp_step").each(function(t){e(this).css({"background-position":-551+parseInt(e(this).css("width"))-(e(this).is(e("#"+i.data.panelId+" .dspp_step:last"))?580:10)+parseInt(e(this).css("padding-left"))+"px "+e(this).backgroundPosition(false).split(" ")[1],color:i.data.hoverColor,cursor:"pointer"})});e(this).prev("a.dspp_step").unbind("mouseout",r);e(this).next("a.dspp_step").bind("mouseout",{options:s,stepColor:i.data.stepColor,panelId:i.data.panelId},r)}else{e(this).siblings("a.dspp_step").each(function(){if(e(this).get(0)===e("#"+i.data.panelId).children("[href]").first().get(0))e("#"+i.data.panelId+" .dspp_boxStart").css("background-position","-10px "+e(this).backgroundPosition().split(" ")[1]);e(this).css({"background-position":-551+parseInt(e(this).css("width"))-(e(this).is(e("#"+i.data.panelId+" .dspp_step:last"))?580:10)+parseInt(e(this).css("padding-left"))+"px "+e(this).backgroundPosition().split(" ")[1],color:i.data.stepColor});e(this).bind("mouseout",{options:s,stepColor:i.data.stepColor,panelId:i.data.panelId},r)})}}s.afterOpen(i,e(this),o,u)}function n(t){var n=e("#"+t.data.panelId).children("[href]").index(e(this));if(false===t.data.options.onHoverIn(t,e(this),n))return;if(e(this).get(0)===e("#"+t.data.panelId).children("[href]").first().get(0))e("#"+t.data.panelId+" .dspp_boxStart").css("background-position","-10px "+e(this).backgroundPosition(false).split(" ")[1]);e(this).css({"background-position":-551+parseInt(e(this).css("width"))-(e(this).is(e("#"+t.data.panelId+" .dspp_step:last"))?580:10)+parseInt(e(this).css("padding-left"))+"px "+e(this).backgroundPosition(false).split(" ")[1],color:t.data.hoverColor,cursor:"pointer"})}function r(t){var n=e("#"+t.data.panelId).children("[href]").index(e(this));if(false===t.data.options.onHoverOut(t,e(this),n))return;var r=true;if(t.data.firstSelected&&e(this).is(e("#"+t.data.panelId+" .dspp_step:first")))r=false;if(e(this).get(0)===e("#"+t.data.panelId).children("[href]").first().get(0))e("#"+t.data.panelId+" .dspp_boxStart").css("background-position","-10px "+e(this).backgroundPosition(r).split(" ")[1]);e(this).css({"background-position":-551+parseInt(e(this).css("width"))-(e(this).is(e("#"+t.data.panelId+" .dspp_step:last"))?580:10)+parseInt(e(this).css("padding-left"))+"px "+e(this).backgroundPosition(r).split(" ")[1],color:t.data.stepColor})}jQuery.fn.backgroundPosition=function(t){t=typeof t=="undefined"?true:t;if(e(this).hasClass("dspp_step-blue-gray")){if(t)return"-10px -10px";else return"-10px -170px"}else if(e(this).hasClass("dspp_step-blue-green")){if(t)return"-10px -90px";else return"-10px -170px"}else if(e(this).hasClass("dspp_step-blue-maroon")){if(t)return"-10px -250px";else return"-10px -170px"}else if(e(this).hasClass("dspp_step-blue-orange")){if(t)return"-10px -330px";else return"-10px -170px"}else if(e(this).hasClass("dspp_step-green-blue")){if(t)return"-10px -170px";else return"-10px -90px"}else if(e(this).hasClass("dspp_step-green-gray")){if(t)return"-10px -10px";else return"-10px -90px"}else if(e(this).hasClass("dspp_step-green-maroon")){if(t)return"-10px -250px";else return"-10px -90px"}else if(e(this).hasClass("dspp_step-green-orange")){if(t)return"-10px -330px";else return"-10px -90px"}else if(e(this).hasClass("dspp_step-maroon-blue")){if(t)return"-10px -170px";else return"-10px -250px"}else if(e(this).hasClass("dspp_step-maroon-gray")){if(t)return"-10px -10px";else return"-10px -250px"}else if(e(this).hasClass("dspp_step-maroon-green")){if(t)return"-10px -90px";else return"-10px -250px"}else if(e(this).hasClass("dspp_step-maroon-orange")){if(t)return"-10px -330px";else return"-10px -250px"}else if(e(this).hasClass("dspp_step-orange-blue")){if(t)return"-10px -170px";else return"-10px -330px"}else if(e(this).hasClass("dspp_step-orange-gray")){if(t)return"-10px -10px";else return"-10px -330px"}else if(e(this).hasClass("dspp_step-orange-green")){if(t)return"-10px -90px";else return"-10px -330px"}else if(e(this).hasClass("dspp_step-orange-maroon")){if(t)return"-10px -90px";else return"-10px -330px"}};jQuery.fn.processPanel=function(i){var s={kind:"stepByStep",style:"green-blue",firstSelected:true,icons:true,imgFolder:"img",chooseAgain:true,markVisited:true,nextPrevButtons:true,nextPrevButtonsPosition:"bottom",nextButtonTitle:"Next step",prevButtonTitle:"Previous step",fadeSpeed:1e3,event:"click",beforeLoad:function(){},onLoad:function(){},onOpen:function(){},afterOpen:function(){},onOpenPopup:function(){},onClosePopup:function(){},onHoverIn:function(){},onHoverOut:function(){}};var i=e.extend(s,i);this.getOptions=function(){return i};this.each(function(){i.beforeLoad();var s=e(this).attr("id");var o=e(this).children("[href]").length;var u=new Array;var a="";e(this).children("[href]").each(function(){if(e(this).attr("href").substr(0,1)!="#"){u.push(e(this).attr("href").split("#")[1]);a+="#"+e(this).attr("href").split("#")[1]+","}else{u.push(e(this).attr("href").substr(1));a+=e(this).attr("href")+","}});a=a.substr(0,a.length-1);e(this).children("[href]").first().before("<div class='dspp_boxStart dspp_boxStart-"+i.style+"'> </div>");var f,l,c,h;e(a).each(function(){e(this).addClass("dspp_content")});e(this).children("[href]").each(function(t){e(this).addClass("dspp_step dspp_step-"+i.style+" dspp_step"+(t+1));if(t==0)e(this).addClass("dspp_step"+(t+1)+"-"+i.style);if(!i.icons)e(this).css("background-image","url('"+i.imgFolder+"/sprite_without_icons.png')");if(t>0)e(this).css("padding-left",parseInt(e(this).css("padding-left"))+20+"px");e(this).css({"z-index":o-t,"background-position":-551+parseInt(e(this).css("width"))-(t+1==o?580:10)+parseInt(e(this).css("padding-left"))+"px "+e(this).backgroundPosition().split(" ")[1]});if(t==0){c=e(this);f=e(this).css("color");e(this).css("margin-left","0px")}else if(t==1){h=e(this);l=e(this).css("color")}if(e(this).attr("label")!=undefined)e(this).append("<span class='dspp_stepLabel"+(t+1==o?"Last":"")+"'>"+e(this).attr("label")+"</span>")});if(!i.firstSelected){c.css("color",l);e("#"+s+" .dspp_boxStart").css("background-position","-10px "+c.backgroundPosition().split(" ")[1])}else{c.css({"background-position":-551+parseInt(c.css("width"))-10+parseInt(c.css("padding-left"))+"px "+c.backgroundPosition(false).split(" ")[1],cursor:"pointer"})}if(i.kind=="stepByStep"){if(!i.firstSelected||i.chooseAgain)c.bind(i.event,{options:i,hoverColor:f,stepColor:l,panelId:s,contentsSelector:a},t);else c.bind(i.event,function(e){e.preventDefault()});if(!i.firstSelected){c.bind("mouseover",{options:i,hoverColor:f,panelId:s},n);c.bind("mouseout",{options:i,stepColor:l,panelId:s},r)}else{h.bind("mouseover",{options:i,hoverColor:f,panelId:s},n);h.bind("mouseout",{options:i,stepColor:l,panelId:s},r);h.bind(i.event,{options:i,hoverColor:f,stepColor:l,panelId:s,contentsSelector:a},t)}}else{e(this).children("[href]").each(function(o){if(o>0||!i.firstSelected||!i.markVisited){e(this).bind("mouseover",{options:i,hoverColor:f,panelId:s},n);if(o>0||!i.firstSelected)e(this).bind("mouseout",{options:i,stepColor:l,panelId:s},r);e(this).bind(i.event,{options:i,stepColor:l,panelId:s,contentsSelector:a},t)}else if(!i.firstSelected||i.chooseAgain)e(this).bind(i.event,{options:i,panelId:s,stepColor:l,contentsSelector:a},t);else e(this).bind(i.event,function(e){e.preventDefault()})})}e(a).each(function(t){if(!i.firstSelected||e(this).attr("id")!=u[0])e(this).css("display","none");else if(e(this).attr("id")==u[0]&&i.nextPrevButtons){if(i.nextPrevButtonsPosition=="top")e("#"+s).prepend("<div class='dspp_nextPrevButtons dspp_clearfix'><a xref='#' class='dspp_button dspp_inactiveButton' title='"+i.prevButtonTitle+"'>"+i.prevButtonTitle+"</a><a xref='"+h.attr("href")+"' class='dspp_button dspp_activeButton-"+i.style+"' title='"+i.nextButtonTitle+"'>"+i.nextButtonTitle+"</a></div>");else e("#"+s).append("<div class='dspp_nextPrevButtons dspp_clearfix'><a xref='#' class='dspp_button dspp_inactiveButton' title='"+i.prevButtonTitle+"'>"+i.prevButtonTitle+"</a><a xref='"+h.attr("href")+"' class='dspp_button dspp_activeButton-"+i.style+"' title='"+i.nextButtonTitle+"'>"+i.nextButtonTitle+"</a></div>")}});if(i.firstSelected&&c.attr("href")!=undefined&&c.attr("href").substr(0,1)!="#"&&c.attr("href")!=""){var p=c.attr("href").split("#")[0];var d=c.attr("href").split("#")[1];e.ajax({url:p,type:"post",async:false,dataType:"html",success:function(t){e("#"+d).html(t)}})}e("#"+s+" .dspp_button[xref!='#']").live("click",function(t){t.preventDefault();e("#"+s+" [href='"+e(this).attr("xref")+"']:not(.dspp_button)").trigger("mouseover").trigger("click")});e("[href='#"+s+"-popup']").click(function(t){var n=e(this).attr("href").substr(0,e(this).attr("href").length-6);if(false===i.onOpenPopup(t,e(this),e(n)))return;t.preventDefault();e("body").append("<div class='dspp_overlay'></div>");e(n).css({width:e(n).width()+"px","z-index":"101"});e(n).css("top",(e(window).height()-e(n).height())/2+e(window).scrollTop()+"px");e(n).css("left",(e(window).width()-e(n).width())/2+e(window).scrollLeft()+"px");e(n).appendTo("body");e(n).css("display","block");e(".dspp_overlay").css({width:e(window).width()+"px",height:e(document).height()+300+"px",opacity:"0.7"});e(n).css("opacity","0");e(n).animate({opacity:1},500,function(){if(jQuery.browser.msie)this.style.removeAttribute("filter")});e(".dspp_overlay").click(function(t){if(false===i.onClosePopup(t,e(n)))return;e(n).animate({opacity:0},500,function(){e(this).css("display","none")});e(this).remove()});e(window).resize(function(){e(".dspp_overlay").css("height",e(document).height()+"px")})});i.onLoad()});return this};e(".dspp_inactiveButton").live("click",function(e){e.preventDefault()})})(jQuery)